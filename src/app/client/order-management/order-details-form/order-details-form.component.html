<section class="order-type-status-container bootstrap">
  <div class="left-section">
    <form [formGroup]="orderTypeStatusForm" class="order-type-status-form">
      <!-- Order Type -->
      <div class="input-container order-type-container">
        <label>Order Type<span class="required">*</span></label>
        <div class="input-group dropdown">
          <ejs-dropdownlist
            placeholder="Order Type"
            formControlName="orderType"
            appValidateWithMessage
            [dataSource]="orderTypes"
            [fields]="orderTypeFields">
          </ejs-dropdownlist>
        </div>
      </div>

      <!-- Status -->
      <div class="input-container order-status-container">
        <label>Status<span *ngIf="isEditMode" class="required">*</span></label>
        <div class="input-group dropdown">
          <ejs-dropdownlist
            placeholder="Order Status"
            formControlName="status"
            [dataSource]="orderStatuses"
            [fields]="orderStatusFields"
            [enabled]="isEditMode">
          </ejs-dropdownlist>
        </div>
      </div>
    </form>
  </div>

  <div class="right-section"></div>
</section>

<section class="order-form-container">
  <div class="left-section">
    <div tabindex="0" class="e-card">
      <div class="e-card-content">
        <div class="general-information">
          <div class="title">General Information</div>
          <div class="general-information-form-container">
            <form [formGroup]="generalInformationForm">
              <div class="form-line">
                <!-- Job Title -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Job Title<span class="required">*</span></label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      appValidateWithMessage
                      formControlName="title"
                      maxlength="50"
                      placeholder="Job Title" />
                  </div>
                </div>

                <!-- Region -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Region<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Region"
                      formControlName="regionId"
                      appValidateWithMessage
                      [dataSource]="regions$ | async"
                      [fields]="regionFields"
                      (change)="onRegionDropDownChanged($event)">
                    </ejs-dropdownlist>
                  </div>
                </div>

                <!-- Location -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Location<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Location"
                      formControlName="locationId"
                      appValidateWithMessage
                      [enabled]="isLocationsDropDownEnabled"
                      [dataSource]="locations$ | async"
                      [fields]="locationFields"
                      (change)="onLocationDropDownChanged($event)">
                    </ejs-dropdownlist>
                  </div>
                </div>

                <!-- Department -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Department<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Department"
                      formControlName="departmentId"
                      appValidateWithMessage
                      [enabled]="isDepartmentsDropDownEnabled"
                      [dataSource]="departments$ | async"
                      [fields]="departmentFields"
                      (change)="onDepartmentDropDownChanged($event)">
                    </ejs-dropdownlist>
                  </div>
                </div>

                <!-- Skill -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Skill<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Skill"
                      formControlName="skillId"
                      appValidateWithMessage
                      [dataSource]="(skills$ | async)"
                      [fields]="skillFields">
                    </ejs-dropdownlist>
                  </div>
                </div>
              </div>

              <div class="form-line">
                <!-- Project Type -->
                <div class="project-type-container form-line-item-20">
                  <div *ngIf="!isEditProjectType" class="input-container bootstrap">
                    <label>Project Type<span class="required">*</span></label>
                    <div class="input-group dropdown">
                      <ejs-dropdownlist
                        placeholder="Project Type"
                        formControlName="projectTypeId"
                        appValidateWithMessage
                        [dataSource]="projectTypes$ | async"
                        [fields]="projectTypeFields">
                      </ejs-dropdownlist>
                    </div>
                  </div>

                  <div *ngIf="isEditProjectType" class="input-container bootstrap">
                    <label>Project Type<span class="required">*</span></label>
                    <div class="input-group">
                      <input
                        class="e-input"
                        type="text"
                        appValidateWithMessage
                        formControlName="projectType"
                        placeholder="Project Type" />
                    </div>
                  </div>

                  <div class="input-container edit-button-container">
                    <button
                      ejs-button
                      type="button"
                      cssClass="e-outline"
                      class="icon-button"
                      (click)="editProjectTypeHandler()">
                      <i-feather name="edit3" class="icon"></i-feather>
                    </button>
                  </div>
                </div>

                <!-- Project Name -->
                <div class="project-name-container form-line-item-20">
                  <div *ngIf="!isEditProjectName" class="input-container bootstrap">
                    <label>Project Name<span class="required">*</span></label>
                    <div class="input-group dropdown">
                      <ejs-dropdownlist
                        placeholder="Project Name"
                        formControlName="projectNameId"
                        appValidateWithMessage
                        [dataSource]="projectNames$ | async"
                        [fields]="projectNameFields">
                      </ejs-dropdownlist>
                    </div>
                  </div>

                  <div *ngIf="isEditProjectName" class="input-container bootstrap">
                    <label>Project Name<span class="required">*</span></label>
                    <div class="input-group">
                      <input
                        class="e-input"
                        type="text"
                        formControlName="projectName"
                        appValidateWithMessage
                        placeholder="Project Name" />
                    </div>
                  </div>

                  <div class="input-container edit-button-container">
                    <button
                      ejs-button
                      type="button"
                      cssClass="e-outline"
                      class="icon-button"
                      (click)="editProjectNameHandler()">
                      <i-feather name="edit3" class="icon"></i-feather>
                    </button>
                  </div>
                </div>
              </div>

              <div class="form-line">
                <!-- Hourly rate -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Hourly rate<span class="required">*</span></label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      formControlName="hourlyRate"
                      appValidateWithMessage
                      placeholder="Hourly rate"
                      maxlength="11"
                      (focus)="priceUtils.setPriceMask(generalInformationForm,'hourlyRate', $event)"
                      (blur)="priceUtils.setTwoDecimals(generalInformationForm, 'hourlyRate', $event)"
                    />
                  </div>
                </div>

                <!-- # Open Positions -->
                <div class="input-container bootstrap form-line-item-20">
                  <label># Open Positions<span class="required">*</span></label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      placeholder="# Open Positions"
                      formControlName="openPositions"
                      appValidateWithMessage
                      maxlength="10" />
                  </div>
                </div>

                <!-- Min Yrs. Req. -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Min Yrs. Req.</label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      placeholder="Min Yrs. Req."
                      formControlName="minYrsRequired"
                      appValidateWithMessage
                      maxlength="10" />
                  </div>
                </div>

                <!-- Joining Bonus -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Joining Bonus</label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      placeholder="Joining Bonus"
                      formControlName="joiningBonus"
                      appValidateWithMessage
                      maxlength="11"
                      (focus)="priceUtils.setPriceMask(generalInformationForm, 'joiningBonus', $event)"
                      (blur)="priceUtils.setTwoDecimals(generalInformationForm,'joiningBonus', $event)"
                    />
                  </div>`
                </div>

                <!-- Comp. Bonus -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Comp. Bonus</label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      placeholder="Comp. Bonus"
                      formControlName="compBonus"
                      appValidateWithMessage
                      maxlength="11"
                      (focus)="priceUtils.setPriceMask(generalInformationForm, 'compBonus', $event)"
                      (blur)="priceUtils.setTwoDecimals(generalInformationForm, 'compBonus', $event)"
                    />
                  </div>
                </div>
              </div>

              <div class="form-line">
                <!-- Duration -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Duration<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Duration"
                      formControlName="duration"
                      appValidateWithMessage
                      [dataSource]="durations"
                      [fields]="durationFields">
                    </ejs-dropdownlist>
                  </div>
                </div>

                <!-- Job Start Date -->
                <div class="datepicker-container form-line-item-20">
                  <label>Job Start Date<span class="required">*</span></label>
                  <div class="input-group datepicker bootstrap">
                    <ejs-datepicker
                      class="datepicker"
                      format="MM/dd/yyyy"
                      placeholder="MM/DD/YYYY"
                      formControlName="jobStartDate"
                      appValidateWithMessage
                      [enableMask]="true"
                      [maskPlaceholder]="{ month: 'MM', day: 'DD', year: 'YYYY' }"
                      [min]="today">
                    </ejs-datepicker>
                  </div>
                </div>

                <!-- Job End Date -->
                <div class="datepicker-container form-line-item-20">
                  <label>Job End Date<span class="required">*</span></label>
                  <div class="input-group datepicker bootstrap">
                    <ejs-datepicker
                      class="datepicker"
                      format="MM/dd/yyyy"
                      placeholder="MM/DD/YYYY"
                      formControlName="jobEndDate"
                      appValidateWithMessage
                      [enableMask]="true"
                      [maskPlaceholder]="{ month: 'MM', day: 'DD', year: 'YYYY' }"
                      [enabled]="isJobEndDateControlEnabled"
                      [enableMask]="true"
                      [maskPlaceholder]="{ month: 'MM', day: 'DD', year: 'YYYY' }"
                      [min]="generalInformationForm.controls['jobStartDate'].value">
                    </ejs-datepicker>
                  </div>
                </div>
              </div>

              <div class="form-line">
                <!-- Shift Requirements -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Shift Requirement<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Shift Requirement"
                      formControlName="shiftRequirementId"
                      appValidateWithMessage
                      [dataSource]="masterShifts$ | async"
                      [fields]="masterShiftFields">
                    </ejs-dropdownlist>
                  </div>
                </div>

                <!-- Shift Start Time -->
                <div class="input-container calendar form-line-item-20">
                  <label for="startTime">Shift Start Time<span class="required">*</span></label>
                  <div class="input-group datepicker bootstrap">
                    <ejs-timepicker
                      placeholder="HH:MM"
                      formControlName="shiftStartTime"
                      appValidateWithMessage
                      format="hh:mm a"
                      [maskPlaceholder]="{ hour: 'HH', minute: 'MM' }"
                      [enableMask]="true"
                      maskPlaceholder="HH:MM">
                    </ejs-timepicker>
                  </div>
                </div>

                <!-- Shift End Time -->
                <div class="input-container calendar form-line-item-20">
                  <label for="startTime">Shift End Time<span class="required">*</span></label>
                  <div class="input-group datepicker bootstrap">
                    <ejs-timepicker
                      placeholder="HH:MM"
                      formControlName="shiftEndTime"
                      appValidateWithMessage
                      format="hh:mm a"
                      [maskPlaceholder]="{ hour: 'HH', minute: 'MM' }"
                      [enableMask]="true"
                      maskPlaceholder="HH:MM">
                    </ejs-timepicker>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="job-distibution">
          <div class="title">Job Distribution</div>
          <div class="job-distribution-form-container">
            <form [formGroup]="jobDistributionForm">
              <div class="form-line">
                <!-- Job Distribution -->
                <div class="input-container bootstrap form-line-item-40">
                  <label>Job Distribution<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-multiselect
                      mode="CheckBox"
                      placeholder="Job Distribution"
                      formControlName="jobDistribution"
                      appValidateWithMessage
                      [dataSource]="jobDistributions"
                      [fields]="jobDistributionFields">
                    </ejs-multiselect>
                  </div>
                </div>

                <!-- Agency -->
                <div class="input-container bootstrap form-line-item-40">
                  <label>
                    Agency
                    <span *ngIf="agencyControlEnabled" class="required">*</span>
                  </label>
                  <div class="input-group dropdown">
                    <ejs-multiselect
                      mode="CheckBox"
                      placeholder="Agency"
                      formControlName="agency"
                      appValidateWithMessage
                      [enabled]="agencyControlEnabled"
                      [dataSource]="associateAgencies$ | async"
                      [fields]="associateAgencyFields">
                    </ejs-multiselect>
                  </div>
                </div>
              </div>
            </form>
          </div>

        </div>
        <div class="job-description">
          <div class="title">Job Description</div>
          <div class="job-description-form-container">
            <form [formGroup]="jobDescriptionForm">
              <div class="form-line">
                <!-- Classification -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Classification<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Classification"
                      formControlName="classification"
                      appValidateWithMessage
                      [dataSource]="jobClassifications"
                      [fields]="jobClassificationFields">
                    </ejs-dropdownlist>
                  </div>
                </div>

                <div class="bootstrap job-description-checkboxes-container">
                  <ejs-checkbox label="On Call Required" formControlName="onCallRequired"></ejs-checkbox>
                  <ejs-checkbox label="ASAP Start" formControlName="asapStart"></ejs-checkbox>
                  <ejs-checkbox label="Critical Order" formControlName="criticalOrder"></ejs-checkbox>
                  <ejs-checkbox label="No OT" formControlName="nO_OT"></ejs-checkbox>
                </div>
              </div>

              <div class="form-line">
                <!-- Job Description -->
                <div class="input-container bootstrap form-line-item-40">
                  <label for="comments">Job Description</label>
                  <div class="input-group">
                    <ejs-textbox
                      class="e-input"
                      type="text"
                      [multiline]="true"
                      appValidateWithMessage
                      maxlength="500"
                      placeholder="Job Description..."
                      formControlName="jobDescription">
                    </ejs-textbox>
                  </div>
                </div>

                <!-- Unit Description -->
                <div class="input-container bootstrap form-line-item-40">
                  <label for="comments">Unit Description</label>
                  <div class="input-group">
                    <ejs-textbox
                      class="e-input"
                      type="text"
                      [multiline]="true"
                      appValidateWithMessage
                      maxlength="500"
                      placeholder="Unit Description..."
                      formControlName="unitDescription">
                    </ejs-textbox>
                  </div>
                </div>
              </div>

              <div class="form-line">
                <!-- Reason of Requisition -->
                <div class="input-container bootstrap form-line-item-40">
                  <label>Reason for Requisition<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      placeholder="Reason for Requisition"
                      formControlName="reasonForRequisition"
                      appValidateWithMessage
                      [dataSource]="reasonsForRequisition"
                      [fields]="reasonForRequisitionFields">
                    </ejs-dropdownlist>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="contact-details">
          <div class="contact-header">
            <div class="title">Contact Details</div>
            <div class="stick-right add-contact-link" (click)="addContact()">
              <i-feather name="plus" class="icon"></i-feather>
              Add Contact
            </div>
          </div>
          <div class="contact-details-form-container">
            <form [formGroup]="contactDetailsForm">
              <ng-container formArrayName="contactDetails">
                <div class="form-line" [formGroupName]="i" *ngFor="let contact of contactDetailsFormArray.controls; let i = index;">
                  <!-- Title -->
                  <div class="contact-details-title-container form-line-item-25">
                    <div *ngIf="!isEditContactTitle[i]" class="input-container bootstrap">
                      <label>Title<span class="required">*</span></label>
                      <div class="input-group dropdown">
                        <ejs-dropdownlist
                          [dataSource]="contactDetailTitles"
                          appValidateWithMessage
                          formControlName="title"
                          placeholder="Title">
                        </ejs-dropdownlist>
                      </div>
                    </div>

                    <div *ngIf="isEditContactTitle[i]" class="input-container bootstrap">
                      <label>Title<span class="required">*</span></label>
                      <div class="input-group">
                        <input
                          class="e-input"
                          type="text"
                          appValidateWithMessage
                          formControlName="title"
                          placeholder="Title" />
                      </div>
                    </div>

                    <div class="input-container edit-button-container">
                      <button
                        ejs-button
                        type="button"
                        cssClass="e-outline"
                        class="icon-button"
                        (click)="editContactTitleHandler(i)">
                        <i-feather name="edit3" class="icon"></i-feather>
                      </button>
                    </div>
                  </div>

                  <!-- Contact Person -->
                  <div class="input-container bootstrap form-line-item-25">
                    <label>Contact Person<span class="required">*</span></label>
                    <div class="input-group">
                      <input
                        class="e-input"
                        type="text"
                        appValidateWithMessage
                        maxLength="50"
                        placeholder="Contact Person"
                        formControlName="name" />
                    </div>
                  </div>

                  <!-- Mobile Phone -->
                  <div class="input-container bootstrap form-line-item-25">
                    <label>Mobile Phone</label>
                    <div class="input-group">
                      <ejs-maskedtextbox
                        promptChar="_"
                        mask='000-000-0000'
                        formControlName="mobilePhone"
                        appValidateWithMessage
                        placeholder="Mobile Phone"
                        maxlength="10">
                      </ejs-maskedtextbox>
                    </div>
                  </div>

                  <!-- Email -->
                  <div class="input-container bootstrap form-line-item-25">
                    <label>Email<span class="required">*</span></label>
                    <div class="input-group">
                      <input
                        class="e-input"
                        type="email"
                        appValidateWithMessage
                        placeholder="Email"
                        formControlName="email" />
                    </div>
                  </div>

                  <!-- Remove button -->
                  <div class="input-container remove-button-container">
                    <button
                      *ngIf="contactDetailsFormArray.controls.length > 1"
                      ejs-button
                      type="button"
                      cssClass="e-outline"
                      class="icon-button"
                      (click)="removeContact(i)">
                      <i-feather name="trash2" class="icon"></i-feather>
                    </button>
                  </div>
                </div>
              </ng-container>
            </form>
          </div>
        </div>
        <div class="work-location">
          <div class="work-location-header">
            <div class="title">Work Location</div>
            <div class="stick-right add-contact-link" (click)="addWorkLocation()">
              <i-feather name="plus" class="icon"></i-feather>
              Add More
            </div>
          </div>

          <form [formGroup]="workLocationForm">
            <ng-container formArrayName="workLocations">
              <div class="form-line" [formGroupName]="i" *ngFor="let workLocation of workLocationsFormArray.controls; let i = index;">
                <!-- Address -->
                <div class="input-container bootstrap form-line-item-40">
                  <label>Address<span class="required">*</span></label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      appValidateWithMessage
                      maxlength="100"
                      placeholder="Address"
                      formControlName="address" />
                  </div>
                </div>

                <!-- State -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>State<span class="required">*</span></label>
                  <div class="input-group dropdown">
                    <ejs-dropdownlist
                      [dataSource]="organizationStatesWithKeyCode$ | async"
                      [fields]="organizationStateWithKeyCodeFields"
                      appValidateWithMessage
                      formControlName="state"
                      placeholder="State">
                    </ejs-dropdownlist>
                  </div>
                </div>

                <!-- City -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>City<span class="required">*</span></label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      appValidateWithMessage
                      maxlength="20"
                      placeholder="City"
                      formControlName="city" />
                  </div>
                </div>

                <!-- Zip Code -->
                <div class="input-container bootstrap form-line-item-20">
                  <label>Zip Code<span class="required">*</span></label>
                  <div class="input-group">
                    <input
                      class="e-input"
                      type="text"
                      appValidateWithMessage
                      placeholder="Zip Code"
                      formControlName="zipCode"
                      maxlength="6"/>
                  </div>
                </div>

                <!-- Remove button -->
                <div class="input-container remove-button-container">
                  <button
                    *ngIf="workLocationsFormArray.controls.length > 1"
                    ejs-button
                    type="button"
                    cssClass="e-outline"
                    class="icon-button"
                    (click)="removeWorkLocation(i)">
                    <i-feather name="trash2" class="icon"></i-feather>
                  </button>
                </div>
              </div>
            </ng-container>
          </form>
        </div>
        <div class="workflow">
          <div class="title">Workflow</div>
          <form [formGroup]="workflowForm">
            <div class="form-line">
              <!-- Workflow -->
              <div class="input-container bootstrap form-line-item-40">
                <label>Workflow<span class="required">*</span></label>
                <div class="input-group dropdown">
                  <ejs-dropdownlist
                    placeholder="Default"
                    formControlName="workflowId"
                    appValidateWithMessage
                    [dataSource]="workflows$ | async"
                    [fields]="workflowFields">
                  </ejs-dropdownlist>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="right-section">
    <app-document-uploader
      uploaderTitle="Documents"
      (selectDocuments)="onDocumentsSelected($event)">
    </app-document-uploader>
  </div>
</section>
