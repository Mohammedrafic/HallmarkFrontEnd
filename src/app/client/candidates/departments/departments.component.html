<app-grid
  class="department-assigned-grid"
  gridTitle="Department Assigned"
  (bulkEventEmitter)="handleBulkEvent($event)"
  [rowSelection]="undefined"
  [rowData]="departmentsAssigned?.items ?? []"
  [columnDefinitions]="columnDef"
  [totalRecordsCount]="departmentsAssigned?.totalCount ?? 0"
  [allowBulkSelection]="true"
  [disableBulkButton]="disableBulkButton"
  [rowSelection]="rowSelection"
  [bulkActionConfig]="bulkActionConfig"
>
  <app-button
    action-button
    iconName="sliders"
    text="Filters"
    [type]="buttonType.ACTION"
    [badgeText]="filtersAmount"
    (clickEmitter)="showFilters()"
  ></app-button>
  <app-button
    action-button
    iconName="plus"
    text="Assign Department"
    [type]="buttonType.ACTION"
    [disabled]="!userPermission[this.userPermissions.ManageIrpCandidateProfile]"
    (clickEmitter)="showAssignDepartmentDialog()"
  ></app-button>
</app-grid>

<app-side-dialog
  *ngIf="(selectedTab$ | async) === candidateTabsEnum.Departments"
  [header]="sideDialogTitle$ | async"
  (formCancelClicked)="onCancel()"
  (formSaveClicked)="onSave()"
>
  <ng-container *ngIf="sideDialogTitle$ | async as dialogTitle">
    <app-assign-department
      #assignDepartment
      *ngIf="
        dialogTitle === sideDialogTitleEnum.AssignDepartment || dialogTitle === sideDialogTitleEnum.EditAssignDepartment
      "
      [dialogData$]="dialogData$"
      (refreshGrid)="refreshGrid()"
      [saveForm$]="saveForm$"
      [departmentHierarchy]="departmentHierarchy"
      [dateRanges]="dateRanges"
    ></app-assign-department>

    <app-edit-departments
      #editDepartments
      *ngIf="dialogTitle === sideDialogTitleEnum.EditBulkDepartments"
      (refreshGrid)="refreshGrid()"
      [saveForm$]="saveForm$"
      [selectedDepartments]="selectedDepartments"
      [dateRanges]="dateRanges"
    ></app-edit-departments>
  </ng-container>
</app-side-dialog>

<app-filter-department
  (resetFilters)="resetFilters()"
  (updateTableByFilters)="updateTableByFilters($event)"
  (appliedFiltersAmount)="applyFiltersAmount($event)"
></app-filter-department>
